xvcv_mdlc_core_modifying_requires_ruler_subclass_or_focus_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_requires_$CLASS$_$ID$_tooltip.fail
        ruler = { has_trait = $ID$ }
    }
}
#remember that this trigger is the opposite version of the above one
xvcv_mdlc_core_modifying_requires_no_ruler_subclass_or_focus_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_requires_no_$CLASS$_$ID$_tooltip.fail
        ruler = { NOT = { has_trait = $ID$ } }
    }
}
#for common traits
xvcv_mdlc_core_modifying_trait_cost_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_cost.fail
        has_country_resource = { type = energy amount >= 200 }
        has_country_resource = { type = alloys amount >= 200 }
    }
}
xvcv_mdlc_core_modifying_trait_points_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_points.fail
        check_variable = { which = xvcv_mdlc_core_modifying_trait_points value >= 1 }
    }
}
#for veteran traits
xvcv_mdlc_core_modifying_trait_cost_alt_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_cost.fail_alt
        has_country_resource = { type = energy amount >= 500 }
        has_country_resource = { type = alloys amount >= 500 }
    }
}
xvcv_mdlc_core_modifying_trait_points_alt_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_points.fail
        check_variable = { which = xvcv_mdlc_core_modifying_trait_points value >= 2 }
    }
}
xvcv_mdlc_core_modifying_trait_skill_level_alt_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_skill_level.fail_alt
        ruler = { has_skill >= 4 }
    }
}
#for destiny traits
xvcv_mdlc_core_modifying_trait_cost_alt_2_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_cost.fail_alt_2
        has_country_resource = { type = energy amount >= 1000 }
        has_country_resource = { type = alloys amount >= 1000 }
    }
}
xvcv_mdlc_core_modifying_trait_points_alt_2_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_points.fail
        check_variable = { which = xvcv_mdlc_core_modifying_trait_points value >= 3 }
    }
}
xvcv_mdlc_core_modifying_trait_skill_level_alt_2_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_trait_skill_level.fail_alt_2
        ruler = { has_skill >= 8 }
    }
}
#and that ends here
xvcv_mdlc_core_modifying_trait_max_number_trigger = {
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_max_traits_number.fail
        check_variable = { which = xvcv_mdlc_core_modifying_max_traits_number value > 0 }
    }
}

# The pattern here seems to be take only positive traits,
# and take the highest level of that trait and add it to the list.
# Traits are organized by which vanilla file are they taken from, and there are a LOT.
xvcv_mdlc_core_modifying_ruler_traits_trigger = {
    optimize_memory
    OR = {
        ######################
        # admiral_traits.txt #
        ######################
        has_trait = trait_ruler_corvette_focus   # doesnt seem good, exclude?
        has_trait = trait_ruler_destroyer_focus  # doesnt seem good, exclude?
        has_trait = trait_ruler_cruiser_focus    # doesnt seem good, exclude?
        has_trait = trait_ruler_battleship_focus # doesnt seem good, exclude?
        has_trait = leader_trait_fleet_logistician
        has_trait = leader_trait_skirmisher_2
        has_trait = leader_trait_aggressive_2
        has_trait = leader_trait_cautious_2
        has_trait = leader_trait_unyielding_2
        has_trait = leader_trait_engineer_2
        has_trait = leader_trait_trickster_2
        # admiral_traits.txt 'aggressor' section
        has_trait = leader_trait_wrecker_3
        has_trait = leader_trait_annihilator_3
        has_trait = leader_trait_artillerist_3
        has_trait = leader_trait_commanding_presence_3
        has_trait = leader_trait_corsair_3
        has_trait = leader_trait_demolisher_3
        has_trait = leader_trait_shipbreaker_3
        # admiral_traits.txt 'tactician' section
        has_trait = leader_trait_archaeo_specialization_3
        has_trait = leader_trait_artillery_specialization_3
        has_trait = leader_trait_carrier_specialization_3
        has_trait = leader_trait_rocketry_specialization_3
        has_trait = leader_trait_gunship_specialization_3
        has_trait = leader_trait_juryrigger_3
        has_trait = leader_trait_surgical_bombardment_3
        has_trait = leader_trait_scout_3
        # admiral_traits.txt 'scout' section
        has_trait = leader_trait_gale_speed_3
        has_trait = trait_ruler_fortifier_3
        has_trait = leader_trait_armada_logistician_3
        has_trait = trait_ruler_military_pioneer_3
        has_trait = leader_trait_intimidator_3
        has_trait = leader_trait_border_guard_3
        has_trait = leader_trait_crew_trainer_3

        ######################
        # general_traits.txt #
        ######################
        has_trait = leader_trait_defence_engineer_2
        has_trait = leader_trait_butcher_2
        has_trait = leader_trait_restrained_2
        # general_traits.txt 'invader' section
        has_trait = leader_trait_dreaded_3
        has_trait = leader_trait_heavy_hitter_3
        has_trait = leader_trait_interrogator_3
        has_trait = leader_trait_crusader_3
        # general_traits.txt 'marshall' section
        has_trait = leader_trait_overseer_3
        has_trait = trait_ruler_from_the_ranks_3
        has_trait = trait_ruler_recruiter_3
        has_trait = leader_trait_consul_general_3
        has_trait = leader_trait_shadow_broker_3
        has_trait = leader_trait_home_guard_3
        # general_traits.txt 'protector' section
        has_trait = leader_trait_hardy_3
        has_trait = leader_trait_martinet_3
        has_trait = leader_trait_warden_3
        has_trait = leader_trait_reinforcer_3
        has_trait = leader_trait_guardian_3
        has_trait = leader_trait_conscripter_3
        #############################
        # generic_leader_traits.txt #
        #############################
        has_trait = leader_trait_adventurous_spirit_3
        has_trait = leader_trait_eager_2
        has_trait = leader_trait_resilient_2
        has_trait = leader_trait_adaptable_2
        has_trait = leader_trait_politician_2
        has_trait = leader_trait_capitalist_2
        has_trait = leader_trait_private_mines_2
        has_trait = leader_trait_homesteader_2
        has_trait = trait_ruler_champion_of_the_people_2
        has_trait = leader_trait_gifted_2
        has_trait = trait_imperial_heir
        has_trait = leader_trait_scrapper_2
        has_trait = leader_trait_entrepreneur_2
        has_trait = leader_trait_venerated_2
        # has_trait = leader_trait_emotional_support_pet
        #######################
        # governor_traits.txt #
        #######################
        has_trait = trait_ruler_frontier_spirit
        has_trait = leader_trait_intellectual
        has_trait = leader_trait_bureaucrat_2
        has_trait = leader_trait_army_veteran_2
        has_trait = leader_trait_retired_fleet_officer_2
        has_trait = leader_trait_agrarian_upbringing_2
        has_trait = trait_ruler_fertility_preacher_2
        has_trait = leader_trait_righteous_2
        has_trait = leader_trait_iron_fist_2
        has_trait = leader_trait_environmental_engineer_2
        has_trait = leader_trait_enlister_2
        has_trait = leader_trait_shipwright_2
        has_trait = leader_trait_architectural_interest_2
        has_trait = leader_trait_trade_focus_2
        # governor_traits.txt 'visionary' section
        has_trait = leader_trait_frontier_spirit_3
        has_trait = leader_trait_cultural_focus_3
        has_trait = trait_ruler_investor_3
        has_trait = trait_ruler_architectural_sense_3
        has_trait = trait_ruler_deep_connections_3
        has_trait = leader_trait_reformer_3
        has_trait = leader_trait_courtroom_training_3
        # governor_traits.txt 'pioneer' section
        has_trait = leader_trait_mining_focus_3
        has_trait = leader_trait_generator_focus_3
        has_trait = leader_trait_farming_focus_3
        has_trait = leader_trait_settler_3
        has_trait = leader_trait_cartographer_3
        has_trait = leader_trait_expeditionist_3
        has_trait = leader_trait_naturalist_3
        # governor_traits.txt 'industrialist' section
        has_trait = leader_trait_forge_focus_3
        has_trait = leader_trait_industrial_focus_3
        has_trait = leader_trait_refinement_focus_3
        has_trait = leader_trait_urbanist
        has_trait = leader_trait_assembler_3
        has_trait = leader_trait_pop_focused_3
        has_trait = leader_trait_distribution_lines_3
        ########################
        # scientist_traits.txt #
        ########################
        has_trait = trait_ruler_space_miner
        has_trait = trait_ruler_home_in_the_sky
        has_trait = leader_trait_carefree_2
        has_trait = leader_trait_roamer_2
        has_trait = leader_trait_archaeologist_2
        has_trait = leader_trait_meticulous_2
        has_trait = leader_trait_custom_AI_assistant
        has_trait = leader_trait_sapient_AI_assistant
        # scientist_traits.txt 'explorer' section
        has_trait = leader_trait_slippery_3
        has_trait = leader_trait_prospector_3
        has_trait = leader_trait_observant_3
        has_trait = leader_trait_academic_dig_site_expert_3
        has_trait = leader_trait_academic_minor_artifacts_expert_3
        has_trait = leader_trait_tuner_3
        has_trait = leader_trait_explorer_cloaking_focus_3
        # scientist_traits.txt 'analyst' section
        has_trait = leader_trait_collaborator_3
        has_trait = leader_trait_manufacturer_3
        has_trait = leader_trait_salvager_3
        has_trait = leader_trait_space_miner_3
        # scientist_traits.txt 'researcher' section
        has_trait = leader_trait_inquisitive_3
        has_trait = leader_trait_maniacal_3
        has_trait = trait_ruler_expansionist_3
        has_trait = leader_trait_science_communicator_3
        # scientist_traits.txt 'researcher focus' section
        has_trait = leader_trait_engineering_focus_3
        has_trait = leader_trait_physics_focus_3
        has_trait = leader_trait_society_focus_3
        # scientist_traits.txt 'researcher expertise' section
        has_trait = leader_trait_expertise_materials_3
        has_trait = leader_trait_expertise_propulsion_3
        has_trait = leader_trait_expertise_voidcraft_3
        has_trait = leader_trait_expertise_industry_3
        has_trait = leader_trait_expertise_field_manipulation_3
        has_trait = leader_trait_expertise_particles_3
        has_trait = leader_trait_expertise_computing_3
        has_trait = leader_trait_expertise_psionics_3
        has_trait = leader_trait_expertise_new_worlds_3
        has_trait = leader_trait_expertise_statecraft_3
        has_trait = leader_trait_expertise_biology_3
        has_trait = leader_trait_expertise_military_theory_3
        has_trait = leader_trait_expertise_archaeostudies_3
        #############################
        # starting_ruler_traits.txt #
        #############################
        has_trait = leader_trait_principled_2
        has_trait = leader_trait_fleet_organizer_2
        has_trait = leader_trait_spycraft_2
        has_trait = leader_trait_spark_of_genius_2
        has_trait = trait_ruler_industrialist_2
        has_trait = trait_ruler_warlike_2
        has_trait = trait_ruler_charismatic_2
        has_trait = trait_ruler_feedback_loop_2
        has_trait = trait_ruler_logistic_understanding_2
        has_trait = trait_ruler_eye_for_talent_2
        # TODO: Include this mod's custom leader traits?

        # 3.9.* compatible traits, original list before update
        # has_trait = leader_trait_armada_logistician_3
        # has_trait = leader_trait_armorer
        # has_trait = leader_trait_army_veteran_2
        # has_trait = leader_trait_bellicose
        # has_trait = leader_trait_border_guard_3
        # has_trait = leader_trait_consul_general_3
        # has_trait = leader_trait_courtroom_training_3
        # has_trait = leader_trait_crew_trainer_3
        # has_trait = leader_trait_cultural_focus_3
        # has_trait = leader_trait_defence_engineer_2
        # has_trait = leader_trait_educator
        # has_trait = leader_trait_engineering_focus_3
        # has_trait = leader_trait_expertise_archaeostudies_3
        # has_trait = leader_trait_expertise_biology_3
        # has_trait = leader_trait_expertise_computing_3
        # has_trait = leader_trait_expertise_field_manipulation_3
        # has_trait = leader_trait_expertise_industry_3
        # has_trait = leader_trait_expertise_materials_3
        # has_trait = leader_trait_expertise_military_theory_3
        # has_trait = leader_trait_expertise_new_worlds_3
        # has_trait = leader_trait_expertise_particles_3
        # has_trait = leader_trait_expertise_propulsion_3
        # has_trait = leader_trait_expertise_psionics_3
        # has_trait = leader_trait_expertise_statecraft_3
        # has_trait = leader_trait_expertise_voidcraft_3
        # has_trait = leader_trait_fleet_organizer_2
        # has_trait = leader_trait_frontier_spirit
        # has_trait = leader_trait_frontier_spirit_3
        # has_trait = leader_trait_gale_speed_3
        # has_trait = leader_trait_guardian_3
        # has_trait = leader_trait_home_guard_3
        # has_trait = leader_trait_inquisitive_3
        # has_trait = leader_trait_intimidator_3
        # has_trait = leader_trait_maniacal_3
        # has_trait = leader_trait_master_bureaucrat
        # has_trait = leader_trait_overseer_3
        # has_trait = leader_trait_physics_focus_3
        # has_trait = leader_trait_politician_2
        # has_trait = leader_trait_principled_2
        # has_trait = leader_trait_reformer_3
        # has_trait = leader_trait_retired_fleet_officer_2
        # has_trait = leader_trait_science_communicator_3
        # has_trait = leader_trait_shadow_broker_3
        # has_trait = leader_trait_society_focus_3
        # has_trait = leader_trait_spark_of_genius_2
        # has_trait = leader_trait_spycraft_2
        # has_trait = leader_trait_spymaster
        # has_trait = subclass_admiral_strategist
        # has_trait = subclass_general_marshall
        # has_trait = subclass_scientist_researcher
        # has_trait = trait_ruler_architectural_sense_3
        # has_trait = trait_ruler_battleship_focus
        # has_trait = trait_ruler_charismatic_2
        # has_trait = trait_ruler_corvette_focus
        # has_trait = trait_ruler_cruiser_focus
        # has_trait = trait_ruler_deep_connections_3
        # has_trait = trait_ruler_destroyer_focus
        # has_trait = trait_ruler_expansionist_3
        # has_trait = trait_ruler_explorer_3
        # has_trait = trait_ruler_eye_for_talent_2
        # has_trait = trait_ruler_feedback_loop_2
        # has_trait = trait_ruler_fertility_preacher_2
        # has_trait = trait_ruler_fortifier_3
        # has_trait = trait_ruler_from_the_ranks_3
        # has_trait = trait_ruler_frontier_spirit
        # has_trait = trait_ruler_home_in_the_sky
        # has_trait = trait_ruler_industrialist_2
        # has_trait = trait_ruler_investor_3
        # has_trait = trait_ruler_logistic_understanding_2
        # has_trait = trait_ruler_military_pioneer_3
        # has_trait = trait_ruler_recruiter_3
        # has_trait = trait_ruler_space_miner
        # has_trait = trait_ruler_warlike_2
        # has_trait = trait_ruler_world_shaper_3
    }
}
xvcv_mdlc_core_modifying_reset_traits_trigger = {
    optimize_memory
    custom_tooltip = xvcv_mdlc_core_modifying_reset_traits_tooltip
    custom_tooltip = xvcv_mdlc_core_modifying_reset_traits_button_effect_tooltip_2
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_reset_traits.fail
        ruler = { xvcv_mdlc_core_modifying_ruler_traits_trigger = yes }
    }
}